<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Swipe</title>
</head>
<body>
  <button id="startBtn">เริ่มเกม</button>
  <audio id="startSound" src="start.mp3"></audio>
  <audio id="bgm" src="bgm.mp3" loop></audio>
  <audio id="swipeUp" src="swipeup.mp3"></audio>
  <audio id="swipeDown" src="swipedown.mp3"></audio>
  <audio id="tap" src="tap.mp3"></audio>
  
  <script>
    let started = false;

    document.getElementById('startBtn').addEventListener('click', () => {
      document.getElementById('startSound').play();
      setTimeout(() => {
        document.getElementById('bgm').play();
        started = true;
      }, 1000);
    });

    // gesture start listener
    window.addEventListener('touchstart', (e) => {
      if (!started) return;
      if (e.touches.length === 2) {
        let startY = e.touches[0].clientY;
        e.target.dataset.startY = startY;
      } else if (e.touches.length === 1) {
        e.target.dataset.tap = 'true';
      }
    });

    // gesture end listener
    window.addEventListener('touchend', (e) => {
      if (!started) return;
      if (e.changedTouches.length === 2) {
        let endY = e.changedTouches[0].clientY;
        let startY = e.target.dataset.startY ? parseFloat(e.target.dataset.startY) : 0;
        if (startY - endY > 50) {
          document.getElementById('swipeUp').play();
        } else if (endY - startY > 50) {
          document.getElementById('swipeDown').play();
        }
      } else if (e.changedTouches.length === 1 && e.target.dataset.tap === 'true') {
        document.getElementById('tap').play();
        e.target.dataset.tap = '';
      }
    });
  </script>
</body>
</html>
