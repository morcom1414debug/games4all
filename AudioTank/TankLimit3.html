<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tank Assassin - Commander Mode</title>
    <style>
        :root {
            --base-green: #4b5320;
            --player-zone: #2e3d2e;
            --enemy-zone: #600000;
            --gold: #ffd700;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: var(--player-zone);
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 10px;
            overflow: hidden;
            transition: background-color 0.5s ease;
        }

        #game-container {
            max-width: 600px;
            width: 100%;
            margin: auto;
            position: relative;
            background-color: var(--base-green);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            box-sizing: border-box;
            min-height: 560px;
            overflow: hidden;
        }

        .smoke-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.08), transparent);
            pointer-events: none;
            animation: drift 8s infinite alternate ease-in-out;
            z-index: 2;
        }
        @keyframes drift {
            from { transform: scale(1) translateX(-5%); }
            to { transform: scale(1.2) translateX(5%); }
        }

        @keyframes pulse-hit {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); filter: brightness(1.3); }
            100% { transform: scale(1); }
        }
        .hit-pulse { animation: pulse-hit 0.5s ease-out; }

        .tank-art {
            font-size: 80px;
            margin: 15px 0;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5));
        }

        /* ‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ */
        .commander-tank {
            filter: drop-shadow(0 0 5px gold) brightness(1.2) sepia(1) hue-rotate(-10deg) saturate(5);
        }

        .back-home-btn {
            position: absolute; top: 10px; left: 10px;
            background-color: #8b0000; color: white; border: 1px solid var(--gold);
            padding: 8px 12px; font-size: 14px; border-radius: 5px;
            z-index: 100; display: none; cursor: pointer;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px); }
            50% { transform: translate(-3px, -2px); }
            100% { transform: translate(0, 0); }
        }
        .shake-effect { animation: shake 0.4s; }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            max-width: 400px;
            margin: 15px auto;
            border: 3px solid var(--gold);
            padding: 10px;
            background-color: rgba(0,0,0,0.3);
            border-radius: 12px;
            position: relative;
            z-index: 3;
        }

        button {
            padding: 5px; font-size: 16px;
            background-color: #6b8e23; color: #fff;
            border: 2px solid var(--gold);
            cursor: pointer; border-radius: 8px;
            aspect-ratio: 1 / 1;
            display: flex; align-items: center; justify-content: center;
            transition: box-shadow 0.2s, background-color 0.2s;
        }

        button:focus:not(:disabled), button:hover:not(:disabled) {
            box-shadow: 0 0 15px #fff, inset 0 0 10px var(--gold);
            background-color: #8da33c;
            outline: 3px solid white;
        }

        .grid button { width: 100%; min-height: 60px; font-weight: bold; }
        button:disabled { opacity: 0.7; }

        .hit-bg { background-color: #ff4500 !important; border-color: #fff !important; }
        .miss-bg { background-color: #444 !important; border-color: #888 !important; }
        .lose-grayscale { filter: grayscale(100%); }

        #lives {
            font-size: 18px; margin: 10px 0;
            display: flex; justify-content: space-around;
            background: rgba(0,0,0,0.4); padding: 10px; border-radius: 10px;
        }

        #announcement, #placement-announce {
            font-size: 19px; margin: 10px 0; color: var(--gold);
            min-height: 1.5em; font-weight: bold;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div class="smoke-overlay" aria-hidden="true"></div>
    <button id="back-home-main" class="back-home-btn">‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡πÄ‡∏Å‡∏°</button>

    <div id="menu">
        <div class="tank-art" aria-hidden="true">üöú</div>
        <h1 tabindex="-1">‡∏¢‡∏∏‡∏ó‡∏ò‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏°‡∏´‡∏≤‡∏Å‡∏≤‡∏¨ - Commander Mode</h1>
        <p>‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì! ‡∏´‡∏≤‡∏Å‡∏Ñ‡∏±‡∏ô‡∏™‡∏µ‡∏ó‡∏≠‡∏á‡∏ñ‡∏π‡∏Å‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ ‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°‡∏à‡∏∞‡∏à‡∏ö‡∏•‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ<br>‡∏ß‡∏≤‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏• 6 ‡∏Ñ‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏™‡∏°‡∏£‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏î‡∏∑‡∏≠‡∏î</p>
        <button id="start-placement" style="aspect-ratio: auto; padding: 15px 30px; margin: 20px auto;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏≤‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏•</button>
    </div>

    <div id="placement" style="display: none;">
        <h2 tabindex="-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (6 ‡∏Ñ‡∏±‡∏ô)</h2>
        <div id="placement-announce" aria-live="polite"></div>
        <div id="placement-grid" class="grid"></div>
    </div>

    <div id="game" style="display: none;">
        <div id="lives">
            <span id="player-lives">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏ö: 6/6</span>
            <span id="enemy-lives">‡∏®‡∏±‡∏ï‡∏£‡∏π: 6/6</span>
        </div>
        <div id="announcement" aria-live="polite"></div>
        <div id="grid-container">
            <div id="player-grid" class="grid" style="display: none;"></div>
            <div id="enemy-grid" class="grid" style="display: none;"></div>
        </div>
    </div>

    <div id="summary" style="display: none;">
        <div class="tank-art" id="summary-art" aria-hidden="true">üéñÔ∏è</div>
        <h2 tabindex="-1">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏£‡∏ö</h2>
        <p id="result-message" style="font-size: 20px;"></p>
        <button id="new-game" style="aspect-ratio: auto; padding: 15px 30px; margin: 20px auto;">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏¢‡∏∏‡∏ó‡∏ò‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</button>
    </div>
</div>

<script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    let sounds = {};
    let bgm, winS, loseS;
    let playerPos = [], enemyPos = [];
    let playerCommander, enemyCommander;
    let lives = { p: 6, e: 6 };
    let currentTurn = '';
    let lastShot = 1;
    let isProcessing = false;

    const loadSounds = () => {
        ['back.mp3','back1.mp3','select.mp3','shoot1.mp3','shoot2.mp3','t1.mp3','t2.mp3','t3.mp3','t4.mp3','t5.mp3','f1.mp3','f2.mp3','f3.mp3','f4.mp3','f5.mp3','a1.mp3','a2.mp3','a3.mp3','a4.mp3','s1.mp3','s2.mp3','s3.mp3','s4.mp3','win1.mp3','lost1.mp3','start3.mp3','start4.mp3']
        .forEach(f => {
            fetch('audio/' + f).then(r => r.arrayBuffer()).then(b => audioCtx.decodeAudioData(b)).then(d => sounds[f] = d);
        });
    };

    const playS = (f, loop = false) => {
        if (!sounds[f]) return null;
        const s = audioCtx.createBufferSource();
        s.buffer = sounds[f]; s.loop = loop;
        s.connect(audioCtx.destination); s.start();
        return s;
    };

    const playRnd = (g) => {
        const m = { 'ph':['t1','t2','t3','t4'], 'pm':['f1','f2','f3','f4'], 'eh':['a1','a2','a3','a4'], 'em':['s1','s2','s3','s4'] };
        const f = m[g][Math.floor(Math.random()*4)] + '.mp3';
        return playS(f);
    };

    function updateNav() {
        const homeBtn = document.getElementById('back-home-main');
        const isMenu = document.getElementById('menu').style.display !== 'none';
        const isSum = document.getElementById('summary').style.display !== 'none';
        homeBtn.style.display = (isMenu || isSum) ? 'block' : 'none';
    }

    function initPlacement() {
        const grid = document.getElementById('placement-grid');
        const ann = document.getElementById('placement-announce');
        grid.innerHTML = ''; playerPos = [];
        ann.textContent = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ñ‡∏±‡∏ô‡∏ó‡∏µ‡πà 1";
        updateNav();

        for (let i = 1; i <= 16; i++) {
            const btn = document.createElement('button');
            btn.textContent = i;
            btn.setAttribute('aria-label', i);
            btn.onclick = async () => {
                if (playerPos.length < 6 && !btn.disabled) {
                    playerPos.push(i);
                    btn.disabled = true;
                    
                    if (playerPos.length === 6) {
                        playerCommander = i;
                        btn.innerHTML = `<span aria-hidden="true" class="commander-tank">üöú</span>`;
                        btn.setAttribute('aria-label', i + " ‡∏ß‡∏≤‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£");
                        ann.textContent = "‡∏ß‡∏≤‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏¢‡∏∏‡∏ó‡∏ò‡∏Å‡∏≤‡∏£...";
                    } else {
                        btn.innerHTML = `<span aria-hidden="true">üöú</span>`;
                        btn.setAttribute('aria-label', i + " ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß");
                    }

                    playS('select.mp3');

                    if (playerPos.length < 5) {
                        ann.textContent = `‡∏ß‡∏≤‡∏á‡∏Ñ‡∏±‡∏ô‡∏ó‡∏µ‡πà ${playerPos.length} ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡πà‡∏≠‡∏≠‡∏µ‡∏Å ${5-playerPos.length} ‡∏Ñ‡∏±‡∏ô`;
                    } else if (playerPos.length === 5) {
                        ann.textContent = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£";
                    } else {
                        const startSound = Math.random() > 0.5 ? 'start3.mp3' : 'start4.mp3';
                        const s = playS(startSound);
                        if (s) await new Promise(r => s.onended = r);
                        startGame();
                    }
                }
            };
            grid.appendChild(btn);
        }
    }

    function startGame() {
        document.getElementById('placement').style.display = 'none';
        document.getElementById('game').style.display = 'block';
        updateNav();
        
        // Enemy Placement
        enemyPos = [];
        while(enemyPos.length < 6) {
            let r = Math.floor(Math.random()*16)+1;
            if(!enemyPos.includes(r)) enemyPos.push(r);
        }
        enemyCommander = enemyPos[5]; // ‡∏Ñ‡∏±‡∏ô‡∏ó‡∏µ‡πà 6 ‡πÄ‡∏õ‡πá‡∏ô Commander

        lives = { p: 6, e: 6 };
        document.getElementById('player-lives').textContent = `‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏ö: 6/6`;
        document.getElementById('enemy-lives').textContent = `‡∏®‡∏±‡∏ï‡∏£‡∏π: 6/6`;

        const pG = document.getElementById('player-grid');
        const eG = document.getElementById('enemy-grid');
        pG.innerHTML = ''; eG.innerHTML = '';

        for(let i=1; i<=16; i++) {
            const pb = document.createElement('button');
            pb.textContent = i; pb.disabled = true;
            if(playerPos.includes(i)) {
                const isCom = (i === playerCommander);
                pb.innerHTML = `<span aria-hidden="true" class="${isCom ? 'commander-tank' : ''}">üöú</span>`;
            }
            pG.appendChild(pb);

            const eb = document.createElement('button');
            eb.textContent = i; eb.dataset.pos = i;
            eb.setAttribute('aria-label', `‡∏¢‡∏¥‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ${i}`);
            eb.onclick = () => {
                if(currentTurn === 'p' && !isProcessing) handleAttack(i, 'p');
            };
            eG.appendChild(eb);
        }
        currentTurn = Math.random() > 0.5 ? 'p' : 'e';
        nextTurn();
    }

    async function handleAttack(pos, side) {
        const isP = side === 'p';
        if (isP) isProcessing = true;

        const targetList = isP ? enemyPos : playerPos;
        const commTarget = isP ? enemyCommander : playerCommander;
        const grid = document.getElementById(isP ? 'enemy-grid' : 'player-grid');
        const btn = grid.querySelector(`button[data-pos="${pos}"]`) || grid.children[pos-1];
        
        const isHit = targetList.includes(pos);
        const isCommanderHit = (pos === commTarget);

        document.getElementById('game-container').classList.add('shake-effect');
        if (isHit) btn.classList.add('hit-pulse');

        const s1 = playS(isHit ? 'shoot2.mp3' : 'shoot1.mp3');
        if (s1) await new Promise(r => s1.onended = r);
        document.getElementById('game-container').classList.remove('shake-effect');

        btn.disabled = true;
        btn.classList.add(isHit ? 'hit-bg' : 'miss-bg');
        
        if (isCommanderHit) {
            btn.innerHTML = `<span aria-hidden="true">üî±üí•</span>`;
            btn.setAttribute('aria-label', `‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ${pos} ‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏ô‡∏≤‡∏®!`);
            const sComm = playS(isP ? 't5.mp3' : 'f5.mp3');
            if (sComm) await new Promise(r => sComm.onended = r);
            finishGame(isP);
            return;
        } else {
            btn.innerHTML = `<span aria-hidden="true">${isHit ? 'üí•' : 'üï≥Ô∏è'}</span>`;
            btn.setAttribute('aria-label', `‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ${pos} ${isHit ? '‡∏£‡∏ñ‡∏ñ‡∏±‡∏á‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏†‡∏≤‡∏û' : '‡∏û‡∏•‡∏≤‡∏î'}`);
            const s2 = playRnd(isP ? (isHit?'ph':'pm') : (isHit?'eh':'em'));
            if (s2) await new Promise(r => s2.onended = r);
        }

        if (isP) lastShot = pos;

        if(isHit) {
            const vic = isP ? 'e' : 'p';
            lives[vic]--;
            document.getElementById(isP?'enemy-lives':'player-lives').textContent = `${isP?'‡∏®‡∏±‡∏ï‡∏£‡∏π':'‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏£‡∏ö'}: ${lives[vic]}/6`;
            if(lives[vic] <= 0) { finishGame(isP); return; }
        }
        
        btn.classList.remove('hit-pulse');
        currentTurn = isP ? 'e' : 'p';
        nextTurn();
    }

    function nextTurn() {
        const isP = currentTurn === 'p';
        if (isP) isProcessing = false;

        document.body.style.backgroundColor = isP ? 'var(--enemy-zone)' : 'var(--player-zone)';
        document.getElementById('player-grid').style.display = isP ? 'none' : 'grid';
        document.getElementById('enemy-grid').style.display = isP ? 'grid' : 'none';
        document.getElementById('announcement').textContent = isP ? "‡∏ï‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏∞‡∏ö‡∏∏‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£!" : "‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πá‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£...";

        if(isP) {
            setTimeout(() => {
                const b = document.getElementById('enemy-grid').querySelector(`button[data-pos="${lastShot}"]:not(:disabled)`) || document.getElementById('enemy-grid').querySelector('button:not(:disabled)');
                if(b) b.focus();
            }, 150);
        } else {
            setTimeout(botMove, 1200);
        }
    }

    async function botMove() {
        const avail = Array.from(document.getElementById('player-grid').children).filter(b => !b.classList.contains('hit-bg') && !b.classList.contains('miss-bg'));
        if (avail.length === 0) return;
        const target = avail[Math.floor(Math.random()*avail.length)];
        const pos = Array.from(target.parentNode.children).indexOf(target) + 1;
        document.getElementById('announcement').textContent = `‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∏‡πà‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ${pos}!`;
        await new Promise(r => setTimeout(r, 800));
        handleAttack(pos, 'e');
    }

    function finishGame(pWon) {
        if (bgm) bgm.stop();
        isProcessing = false;
        document.getElementById('game').style.display = 'none';
        document.getElementById('summary').style.display = 'block';
        updateNav();
        
        const msg = document.getElementById('result-message');
        const art = document.getElementById('summary-art');
        
        const winMsgs = [
            "‡∏°‡∏´‡∏≤‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≠‡∏á‡∏ó‡∏±‡∏û! ‡∏Ñ‡∏∏‡∏ì‡∏ö‡∏î‡∏Ç‡∏¢‡∏µ‡πâ‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏à‡∏ô‡∏£‡∏≤‡∏ö‡∏Ñ‡∏≤‡∏ö!",
            "‡∏ä‡∏±‡∏¢‡∏ä‡∏ô‡∏∞‡∏≠‡∏±‡∏ô‡∏£‡∏∏‡πà‡∏á‡πÇ‡∏£‡∏à‡∏ô‡πå! ‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏à‡∏≤‡∏£‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå",
            "‡∏õ‡∏¥‡∏î‡∏â‡∏≤‡∏Å‡∏™‡∏á‡∏Ñ‡∏£‡∏≤‡∏°! ‡∏Å‡∏≠‡∏á‡∏ó‡∏±‡∏û‡∏®‡∏±‡∏ï‡∏£‡∏π‡πÑ‡∏£‡πâ‡∏´‡∏±‡∏ß‡πÇ‡∏Ç‡∏ô‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏≠‡∏°‡∏à‡∏≥‡∏ô‡∏ô!"
        ];
        const loseMsgs = [
            "‡πÇ‡∏®‡∏Å‡∏ô‡∏≤‡∏è‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏´‡πà‡∏á‡∏™‡∏°‡∏£‡∏†‡∏π‡∏°‡∏¥... ‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏ä‡∏µ‡∏û‡πÅ‡∏•‡πâ‡∏ß",
            "‡∏û‡πà‡∏≤‡∏¢‡πÅ‡∏û‡πâ‡∏¢‡πà‡∏≠‡∏¢‡∏¢‡∏±‡∏ö! ‡∏ê‡∏≤‡∏ô‡∏ó‡∏±‡∏û‡∏•‡πà‡∏°‡∏™‡∏•‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£‡∏ñ‡∏π‡∏Å‡∏¢‡∏∂‡∏î‡∏Ñ‡∏£‡∏≠‡∏á",
            "‡∏™‡∏¥‡πâ‡∏ô‡πÅ‡∏™‡∏á‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏±‡∏á... ‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡∏à‡∏∏‡∏î‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ"
        ];

        if (pWon) {
            msg.textContent = winMsgs[Math.floor(Math.random()*winMsgs.length)];
            art.textContent = "üèÜ";
            winS = playS('win1.mp3');
        } else {
            msg.textContent = loseMsgs[Math.floor(Math.random()*loseMsgs.length)];
            art.textContent = "üåë";
            document.getElementById('game-container').classList.add('lose-grayscale');
            loseS = playS('lost1.mp3');
        }

        const nb = document.getElementById('new-game');
        nb.onclick = () => {
            if(winS) winS.stop(); if(loseS) loseS.stop();
            document.getElementById('game-container').classList.remove('lose-grayscale');
            document.getElementById('summary').style.display = 'none';
            document.getElementById('placement').style.display = 'block';
            
            const bgmFile = Math.random() > 0.5 ? 'back.mp3' : 'back1.mp3';
            bgm = playS(bgmFile, true);
            initPlacement();
        };
        document.querySelector('#summary h2').focus();
    }

    window.onload = () => {
        loadSounds();
        document.getElementById('start-placement').onclick = () => {
            document.getElementById('menu').style.display = 'none';
            document.getElementById('placement').style.display = 'block';
            const bgmFile = Math.random() > 0.5 ? 'back.mp3' : 'back1.mp3';
            bgm = playS(bgmFile, true);
            initPlacement();
            document.querySelector('#placement h2').focus();
        };
        document.getElementById('back-home-main').onclick = () => {
            if (bgm) bgm.stop();
            window.location.href = '../index.html';
        };
        document.querySelector('#menu h1').focus();
        updateNav();
    };
</script>

</body>
</html>