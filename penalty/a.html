<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÄ‡∏Å‡∏°‡∏¢‡∏¥‡∏á‡∏à‡∏∏‡∏î‡πÇ‡∏ó‡∏© 2005/2006</title>
<style>
body { 
  font-family: Tahoma; 
  background:#111; 
  color:white; 
  text-align:center; 
  margin:0;
  padding:20px;
  height:100vh;
  overflow:hidden;
  position:relative;
}

.shot-btn { 
  position:fixed;
  background:rgba(255,255,255,0.9); 
  border-radius:15px;
  padding:25px 30px;
  font-weight:bold;
  cursor:pointer;
  border:3px solid #fff;
  font-size:22px;
  z-index:1000;
  box-shadow:0 8px 20px rgba(0,0,0,0.5);
  transition:all 0.2s;
}

.shot-btn:active {
  transform:scale(0.95);
  box-shadow:0 4px 10px rgba(0,0,0,0.5);
}

#tl { 
  top:10%; 
  left:10%; 
}

#tr { 
  top:10%; 
  right:10%; 
}

#center { 
  top:50%; 
  left:50%; 
  transform:translate(-50%, -50%); 
}

#bl { 
  bottom:10%; 
  left:10%; 
}

#br { 
  bottom:10%; 
  right:10%; 
}

#scoreBoard { 
  margin-top:20px; 
  font-size:28px;
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  z-index:1001;
  background:rgba(0,0,0,0.7);
  padding:15px 30px;
  border-radius:15px;
  border:2px solid #fff;
}

#teamSelect {
  display:flex;
  flex-direction:column;
  gap:20px;
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
}

#teamSelect button {
  background:rgba(255,255,255,0.9);
  border-radius:15px;
  padding:25px 40px;
  font-weight:bold;
  cursor:pointer;
  border:3px solid #fff;
  font-size:24px;
  transition:all 0.2s;
}

#teamSelect button:active {
  transform:scale(0.95);
}

#gameScreen {
  width:100vw;
  height:100vh;
}
</style>
</head>
<body>

<h1 style="margin-bottom:40px;">‡πÄ‡∏Å‡∏°‡∏¢‡∏¥‡∏á‡∏à‡∏∏‡∏î‡πÇ‡∏ó‡∏© 2005/2006</h1>

<!-- aria-live ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö iOS ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ö‡∏ö assertive -->
<div id="tts" aria-live="assertive" style="position:absolute;left:-9999px;"></div>

<div id="teamSelect">
<p style="font-size:28px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
<button onclick="selectTeam('Manchester United')" aria-label="‡πÅ‡∏°‡∏ô‡πÄ‡∏ä‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏¢‡∏π‡πÑ‡∏ô‡πÄ‡∏ï‡πá‡∏î" tabindex="0">‡πÅ‡∏°‡∏ô‡πÄ‡∏ä‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏¢‡∏π‡πÑ‡∏ô‡πÄ‡∏ï‡πá‡∏î</button>
<button onclick="selectTeam('Liverpool')" aria-label="‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏û‡∏π‡∏•" tabindex="0">‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏û‡∏π‡∏•</button>
<button onclick="selectTeam('Arsenal')" aria-label="‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏ô‡∏≠‡∏•" tabindex="0">‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏ô‡∏≠‡∏•</button>
<button onclick="selectTeam('Chelsea')" aria-label="‡πÄ‡∏ä‡∏•‡∏ã‡∏µ" tabindex="0">‡πÄ‡∏ä‡∏•‡∏ã‡∏µ</button>
</div>

<div id="gameScreen" style="display:none;">
<div id="scoreBoard">Score ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ 0 - 0</div>

<button id="tl" class="shot-btn" onclick="debounceClick('TL')" aria-label="‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô" tabindex="0">‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô</button>
<button id="tr" class="shot-btn" onclick="debounceClick('TR')" aria-label="‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô" tabindex="0">‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô</button>
<button id="center" class="shot-btn" onclick="debounceClick('C')" aria-label="‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á" tabindex="0">‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á</button>
<button id="bl" class="shot-btn" onclick="debounceClick('BL')" aria-label="‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á" tabindex="0">‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á</button>
<button id="br" class="shot-btn" onclick="debounceClick('BR')" aria-label="‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á" tabindex="0">‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á</button>
</div>

<!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
<audio id="bgm" loop src="audio/b.mp3"></audio>
<audio id="goal" src="audio/t.mp3"></audio>
<audio id="miss" src="audio/f.mp3"></audio>
<audio id="end" src="audio/end.mp3"></audio>

<script>
/* ===============================
   ‡∏£‡∏∞‡∏ö‡∏ö TTS Queue ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö iOS
   =============================== */
let ttsQueue = [];
let isSpeaking = false;

function speak(text){
  ttsQueue.push(text);
  processTTS();
}

function processTTS(){
  if(isSpeaking || ttsQueue.length === 0) return;

  isSpeaking = true;
  const msg = ttsQueue.shift();

  // ‡πÄ‡∏û‡∏¥‡πà‡∏° delay ‡∏Å‡∏±‡∏ô‡πÇ‡∏î‡∏ô Safari ‡∏ï‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
  setTimeout(()=>{
    document.getElementById("tts").innerText = msg;
    // ‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô
    setTimeout(()=>{
      isSpeaking = false;
      document.getElementById("tts").innerText = ""; // ‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á‡∏û‡∏π‡∏î
      processTTS();
    }, Math.max(600, msg.length * 40));
  }, 50);
}

/* ===============================
   ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏ô‡∏à‡∏ö
   =============================== */
function waitForSound(audioEl){
  return new Promise(resolve => {
    audioEl.onended = ()=>resolve();
    audioEl.play().catch(()=> resolve());
  });
}

/* ===============================
   ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°
   =============================== */
const squads = {
  "Manchester United": {
    "players": ["‡πÅ‡∏Å‡∏£‡∏µ‡πà ‡πÄ‡∏ô‡∏ß‡∏¥‡∏•‡∏•‡πå","‡∏£‡∏¥‡πÇ‡∏≠ ‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏î‡∏¥‡∏ô‡∏≤‡∏ô‡∏î‡πå","‡πÄ‡∏ß‡∏™ ‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡πå","‡∏õ‡∏≤‡∏ó‡∏£‡∏¥‡∏ã ‡πÄ‡∏≠‡∏ü‡∏£‡πà‡∏≤",
                "‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡πÇ‡∏ô‡πà ‡πÇ‡∏£‡∏ô‡∏±‡∏•‡πÇ‡∏î‡πâ","‡∏û‡∏≠‡∏• ‡∏™‡πÇ‡∏Ñ‡∏•‡∏™‡πå","‡∏à‡∏≠‡∏´‡πå‡∏ô ‡πÇ‡∏≠‡πÄ‡∏ä","‡πÑ‡∏£‡∏≠‡∏±‡∏ô ‡∏Å‡∏¥‡πä‡∏Å‡∏™‡πå",
                "‡πÄ‡∏ß‡∏¢‡πå‡∏ô ‡∏£‡∏π‡∏ô‡∏µ‡πà‡∏¢‡πå","‡∏£‡∏∏‡∏î ‡∏ü‡∏≤‡∏ô ‡∏ô‡∏¥‡∏™‡πÄ‡∏ó‡∏•‡∏£‡∏≠‡∏¢"],
    "keeper": "‡πÄ‡∏≠‡πá‡∏î‡∏ß‡∏¥‡∏ô ‡∏ü‡∏≤‡∏ô ‡πÄ‡∏î‡∏≠‡∏£‡πå ‡∏ã‡∏≤‡∏£‡πå"
  },
  "Liverpool": {
    "players": ["‡∏™‡∏ï‡∏µ‡∏ü ‡∏ü‡∏¥‡∏ô‡πÅ‡∏ô‡∏ô","‡πÄ‡∏à‡∏°‡∏µ‡πà ‡∏Ñ‡∏≤‡∏£‡πå‡∏£‡∏≤‡πÄ‡∏Å‡∏≠‡∏£‡πå","‡∏ã‡∏≤‡∏°‡∏µ‡πà ‡∏Æ‡∏π‡πÄ‡∏õ‡∏µ‡∏¢","‡∏à‡∏≠‡∏´‡πå‡∏ô ‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ô‡πà ‡∏£‡∏µ‡πÄ‡∏ã‡πà",
                "‡∏ã‡∏≤‡∏ö‡∏µ ‡∏≠‡∏•‡∏≠‡∏ô‡πÇ‡∏ã‡πà","‡πÇ‡∏°‡∏Æ‡∏≤‡πÄ‡∏´‡∏°‡πá‡∏î ‡∏ã‡∏¥‡∏™‡πÇ‡∏ã‡πÇ‡∏Å‡πâ","‡∏™‡∏ï‡∏µ‡πÄ‡∏ß‡πà‡∏ô ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏£‡∏≤‡∏£‡πå‡∏î","‡∏´‡∏•‡∏∏‡∏¢‡∏™‡πå ‡∏Å‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏µ‡∏¢",
                "‡∏õ‡∏µ‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÄ‡∏Ñ‡∏£‡πâ‡∏≤‡∏ä‡πå","‡∏å‡∏¥‡∏ö‡∏£‡∏¥‡∏• ‡∏ã‡∏¥‡∏™‡πÄ‡∏ã‡πà"],
    "keeper": "‡πÄ‡∏õ‡πÄ‡∏õ‡πâ ‡πÄ‡∏£‡∏ô‡πà‡∏≤"
  },
  "Arsenal": {
    "players": ["‡πÄ‡∏≠‡πá‡∏°‡∏°‡∏≤‡∏ô‡∏π‡πÄ‡∏≠‡∏• ‡πÄ‡∏≠‡∏ö‡∏π‡πÄ‡∏≠‡πâ","‡πÇ‡∏Ñ‡πÇ‡∏• ‡∏ï‡∏π‡πÄ‡∏£‡πà","‡πÇ‡∏ã‡∏• ‡πÅ‡∏Ñ‡∏°‡πÄ‡∏ö‡∏•","‡πÅ‡∏≠‡∏ä‡∏•‡∏µ‡∏¢‡πå ‡πÇ‡∏Ñ‡∏•",
                "‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ã‡∏≤‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå ‡πÄ‡∏Ñ‡∏•‡πá‡∏ö","‡∏å‡∏¥‡∏•‡πÅ‡∏ö‡∏£‡πå‡πÇ‡∏ï‡πâ ‡∏ã‡∏¥‡∏•‡∏ß‡∏≤","‡πÄ‡∏ä‡∏™ ‡∏ü‡∏≤‡πÄ‡∏ö‡∏£‡∏Å‡∏±‡∏™","‡πÇ‡∏£‡πÅ‡∏ö‡∏£‡πå ‡∏õ‡∏¥‡πÅ‡∏£‡∏™",
                "‡πÄ‡∏ü‡∏£‡∏î‡∏£‡∏¥‡∏Å ‡∏•‡∏∏‡∏á‡πÄ‡∏ö‡∏¥‡∏£‡πå‡∏Å","‡πÄ‡∏ò‡∏µ‡∏¢‡∏£‡πå‡∏£‡∏µ‡πà ‡∏≠‡∏≠‡∏á‡∏£‡∏µ"],
    "keeper": "‡πÄ‡∏¢‡∏ô‡∏™‡πå ‡πÄ‡∏•‡∏´‡πå‡∏°‡∏±‡∏ô‡∏ô‡πå"
  },
  "Chelsea": {
    "players": ["‡πÄ‡∏õ‡∏≤‡πÇ‡∏• ‡πÄ‡∏ü‡∏£‡πå‡πÄ‡∏£‡∏£‡πà‡∏≤","‡∏£‡∏¥‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏î‡πâ ‡∏Ñ‡∏≤‡∏£‡πå‡∏ß‡∏±‡∏•‡πÇ‡∏ç‡πà","‡∏à‡∏≠‡∏´‡πå‡∏ô ‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà","‡∏ß‡∏¥‡∏•‡πÄ‡∏•‡∏µ‡∏¢‡∏° ‡∏Å‡∏±‡∏•‡∏•‡∏≤‡∏™",
                "‡πÇ‡∏Ñ‡∏•‡πâ‡∏î ‡∏°‡∏≤‡πÄ‡∏Å‡πÄ‡∏•‡πÄ‡∏•‡πà","‡∏°‡∏¥‡∏Ñ‡∏≤‡πÄ‡∏≠‡∏• ‡πÄ‡∏≠‡∏™‡πÄ‡∏ã‡∏µ‡∏¢‡∏á","‡πÅ‡∏ü‡∏£‡∏á‡∏Å‡πå ‡πÅ‡∏•‡∏°‡∏û‡∏≤‡∏£‡πå‡∏î","‡πÇ‡∏à ‡πÇ‡∏Ñ‡∏•",
                "‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏¢‡∏ô ‡∏£‡πá‡∏≠‡∏ö‡πÄ‡∏ö‡∏ô","‡πÄ‡∏Æ‡∏≠‡∏£‡πå‡∏ô‡∏±‡∏ô ‡πÄ‡∏Ñ‡∏£‡∏™‡πÇ‡∏õ"],
    "keeper": "‡∏õ‡∏µ‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÄ‡∏ä‡πá‡∏Å"
  }
};

/* ===============================
   ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡∏°
   =============================== */
let userTeam, cpuTeam;
let score = 0, oppScore = 0;
let turn = 0;
let isSudden = false;
let shotIndexUser = 0, shotIndexCPU = 0;

let userShotsOrder = [];
let cpuShotsOrder = [];

let shooterTeam = "";
let shooterName = "";

/* ===============================
   Debounce ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö VoiceOver
   =============================== */
let isButtonLocked = false;

function debounceClick(dir){
  if(isButtonLocked) return;
  isButtonLocked = true;
  chooseDirection(dir);
  setTimeout(()=>{ isButtonLocked = false; }, 100);
}

/* ===============================
   ‡πÄ‡∏™‡∏µ‡∏¢‡∏á
   =============================== */
const bgm = document.getElementById("bgm");
const goalSnd = document.getElementById("goal");
const missSnd = document.getElementById("miss");
const endSnd = document.getElementById("end");

function playSound(el){
  el.currentTime = 0;
  el.play().catch(()=>{});
}

function stopBGM(){
  bgm.pause();
  bgm.currentTime = 0;
}

/* ===============================
   Utility
   =============================== */
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function createShotsOrder(team){
  let players = squads[team].players.slice();
  shuffle(players);
  players.push(squads[team].keeper); // keeper last
  return players;
}

/* ===============================
   ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡∏°
   =============================== */
function selectTeam(team){
  userTeam = team;
  let remain = Object.keys(squads).filter(t=>t!==team);
  cpuTeam = remain[Math.floor(Math.random()*remain.length)];

  document.getElementById("teamSelect").style.display="none";
  document.getElementById("gameScreen").style.display="block";

  userShotsOrder = createShotsOrder(userTeam);
  cpuShotsOrder = createShotsOrder(cpuTeam);

  score=0; oppScore=0; turn=0;
  shotIndexUser=0; shotIndexCPU=0;
  isSudden=false;

  updateScoreboard();
  startTurn();

  playSound(bgm);
}

/* ===============================
   ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏≤
   =============================== */
function startTurn(){
  if(turn===0){
    shooterTeam = userTeam;
    shooterName = userShotsOrder[shotIndexUser];
    speak(`‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà ${shotIndexUser+1} ${shooterTeam}: ${shooterName} ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏¢‡∏¥‡∏á`);
  } else {
    shooterTeam = cpuTeam;
    shooterName = cpuShotsOrder[shotIndexCPU];
    let keeper = squads[userTeam].keeper;
    speak(`‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà ${shotIndexCPU+1} ${shooterTeam}: ${shooterName} ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏¢‡∏¥‡∏á ${keeper} ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ã‡∏ü`);
  }
}

/* ===============================
   ‡∏¢‡∏¥‡∏á
   =============================== */
async function chooseDirection(dir){
  let keeperDir = ["TL","TR","C","BL","BR"][Math.floor(Math.random()*5)];
  let isGoal = dir !== keeperDir;

  if(turn===0) score += isGoal?1:0;
  else oppScore += isGoal?1:0;

  updateScoreboard();

  const finalMsg = `${shooterName} ${shooterTeam} ‡∏¢‡∏¥‡∏á${isGoal?"‡πÄ‡∏Ç‡πâ‡∏≤":"‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤"}! Score ${score} - ${oppScore}`;

  // üéß ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏π‡∏î‡∏ú‡∏•
  if(isGoal) await waitForSound(goalSnd);
  else await waitForSound(missSnd);

  // ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏û‡∏π‡∏î‡∏ú‡∏• (iOS ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ï‡∏±‡∏î)
  speak(finalMsg);

  if(turn===0) shotIndexUser++;
  else shotIndexCPU++;

  setTimeout(checkGameEndOrNext, 1000);
}

/* ===============================
   ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏ö‡πÄ‡∏Å‡∏° (‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏° FIFA)
   =============================== */
function checkGameEndOrNext(){
  let rU = 5 - shotIndexUser; // ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏¢‡∏¥‡∏á‡∏Ç‡∏≠‡∏á user
  let rC = 5 - shotIndexCPU; // ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏¢‡∏¥‡∏á‡∏Ç‡∏≠‡∏á CPU
  let end = false;

  if(!isSudden){
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ä‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏ö 5 ‡∏•‡∏π‡∏Å
    if(shotIndexUser > shotIndexCPU){
      // User ‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏¢‡∏¥‡∏á
      if(score - oppScore > rC){
        end = true; // User ‡∏ä‡∏ô‡∏∞ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ CPU ‡∏ï‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô
      }
    } else if(shotIndexCPU >= shotIndexUser){
      // CPU ‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏¢‡∏¥‡∏á
      if(oppScore - score > rU){
        end = true; // CPU ‡∏ä‡∏ô‡∏∞ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ User ‡∏ï‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ô
      }
    }

    // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏£‡∏ö 5 ‡∏•‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà
    if(shotIndexUser >= 5 && shotIndexCPU >= 5){
      if(score !== oppScore){
        end = true; // ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞
      } else {
        isSudden = true;
        speak("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ã‡∏±‡∏î‡πÄ‡∏î‡∏ô‡πÄ‡∏î‡∏ò!");
      }
    }
  } else {
    // ‡∏ã‡∏±‡∏î‡πÄ‡∏î‡∏ô‡πÄ‡∏î‡∏ò: ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏¥‡∏á‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
    if(shotIndexUser > shotIndexCPU){
      // ‡∏£‡∏≠ CPU ‡∏¢‡∏¥‡∏á
      turn = 1;
      setTimeout(startTurn, 800);
      return;
    } else if(shotIndexCPU >= shotIndexUser){
      // ‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà‡∏¢‡∏¥‡∏á‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ
      if(score !== oppScore){
        end = true; // ‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞
      }
    }
  }

  if(end){
    stopBGM();
    waitForSound(endSnd).then(()=>{
      let msg = score > oppScore ? `${userTeam} ‡∏ä‡∏ô‡∏∞!` : score < oppScore ? `${cpuTeam} ‡∏ä‡∏ô‡∏∞!` : "‡πÄ‡∏™‡∏°‡∏≠!";
      speak(msg);
      setTimeout(()=> alert(msg), 800);
      setTimeout(resetGame, 1200);
    });
  } else {
    turn = 1 - turn;
    setTimeout(startTurn, 800);
  }
}

/* ===============================
   ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
   =============================== */
function updateScoreboard(){
  document.getElementById("scoreBoard").innerText = 
      `Score ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ${score} - ${oppScore}`;
}

/* ===============================
   ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°
   =============================== */
function resetGame(){
  stopBGM();
  score=0; oppScore=0;
  turn=0; shotIndexUser=0; shotIndexCPU=0;
  isSudden=false;

  userShotsOrder=[]; 
  cpuShotsOrder=[];

  document.getElementById("gameScreen").style.display="none";
  document.getElementById("teamSelect").style.display="block";
}
</script>
</body>
</html>