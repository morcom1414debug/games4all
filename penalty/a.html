<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÄ‡∏Å‡∏°‡∏¢‡∏¥‡∏á‡∏à‡∏∏‡∏î‡πÇ‡∏ó‡∏© 2005/2006</title>
<style>
body { font-family: Tahoma; background:#111; color:white; text-align:center; }
.goal-container {position:relative;width:400px;height:220px;margin:auto;}
.goal-img {width:100%;height:100%;border:2px solid #fff;border-radius:10px;}
.shot-btn {position:absolute;background:rgba(255,255,255,0.85);border-radius:7px;padding:7px;font-weight:bold;cursor:pointer;border:none;}
#tl {top:10px; left:20px;} 
#tr {top:10px; right:20px;} 
#center {top:90px; left:50%; transform:translateX(-50%);} 
#bl {bottom:10px; left:20px;} 
#br {bottom:10px; right:20px;}
#scoreBoard {margin-top:20px; font-size:20px;}
</style>
</head>
<body>

<h1>‡πÄ‡∏Å‡∏°‡∏¢‡∏¥‡∏á‡∏à‡∏∏‡∏î‡πÇ‡∏ó‡∏© 2005/2006</h1>

<!-- aria-live ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö iOS ‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏ö‡∏ö assertive -->
<div id="tts" aria-live="assertive" style="position:absolute;left:-9999px;"></div>

<div id="teamSelect">
<p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
<button onclick="selectTeam('Manchester United')">‡πÅ‡∏°‡∏ô‡πÄ‡∏ä‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡∏¢‡∏π‡πÑ‡∏ô‡πÄ‡∏ï‡πá‡∏î</button>
<button onclick="selectTeam('Liverpool')">‡∏•‡∏¥‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏û‡∏π‡∏•</button>
<button onclick="selectTeam('Arsenal')">‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏ô‡∏≠‡∏•</button>
<button onclick="selectTeam('Chelsea')">‡πÄ‡∏ä‡∏•‡∏ã‡∏µ</button>
</div>

<div id="gameScreen" style="display:none;">
<div id="scoreBoard">Score ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ 0 - 0</div>

<div class="goal-container">
<img src="https://i.imgur.com/v8hF1P8.png" class="goal-img">
<button id="tl" class="shot-btn" onclick="chooseDirection('TL')">‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏ö‡∏ô</button>
<button id="tr" class="shot-btn" onclick="chooseDirection('TR')">‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô</button>
<button id="center" class="shot-btn" onclick="chooseDirection('C')">‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á</button>
<button id="bl" class="shot-btn" onclick="chooseDirection('BL')">‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏á</button>
<button id="br" class="shot-btn" onclick="chooseDirection('BR')">‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á</button>
</div>
</div>

<!-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á -->
<audio id="bgm" loop src="audio/b.mp3"></audio>
<audio id="goal" src="audio/t.mp3"></audio>
<audio id="miss" src="audio/f.mp3"></audio>
<audio id="end" src="audio/end.mp3"></audio>

<script>
/* ===============================
   ‡∏£‡∏∞‡∏ö‡∏ö TTS Queue ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö iOS
   =============================== */
let ttsQueue = [];
let isSpeaking = false;

function speak(text){
  ttsQueue.push(text);
  processTTS();
}

function processTTS(){
  if(isSpeaking || ttsQueue.length === 0) return;

  isSpeaking = true;
  const msg = ttsQueue.shift();

  // ‡πÄ‡∏û‡∏¥‡πà‡∏° delay ‡∏Å‡∏±‡∏ô‡πÇ‡∏î‡∏ô Safari ‡∏ï‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
  setTimeout(()=>{
    document.getElementById("tts").innerText = "";
    setTimeout(()=>{
      document.getElementById("tts").innerText = msg;
      // ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡πà‡∏≤‡∏ô ~0.8‚Äì1.2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß
      setTimeout(()=>{
        isSpeaking = false;
        processTTS();
      }, Math.max(900, msg.length * 55));
    }, 50);
  }, 100);
}

/* ===============================
   ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏ô‡∏à‡∏ö
   =============================== */
function waitForSound(audioEl){
  return new Promise(resolve => {
    audioEl.onended = ()=>resolve();
    audioEl.play().catch(()=> resolve());
  });
}

/* ===============================
   ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°
   =============================== */
const squads = {
  "Manchester United": {
    "players": ["‡πÅ‡∏Å‡∏£‡∏µ‡πà ‡πÄ‡∏ô‡∏ß‡∏¥‡∏•‡∏•‡πå","‡∏£‡∏¥‡πÇ‡∏≠ ‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏î‡∏¥‡∏ô‡∏≤‡∏ô‡∏î‡πå","‡πÄ‡∏ß‡∏™ ‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡πå","‡∏õ‡∏≤‡∏ó‡∏£‡∏¥‡∏ã ‡πÄ‡∏≠‡∏ü‡∏£‡πà‡∏≤",
                "‡∏Ñ‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏µ‡∏¢‡πÇ‡∏ô‡πà ‡πÇ‡∏£‡∏ô‡∏±‡∏•‡πÇ‡∏î‡πâ","‡∏û‡∏≠‡∏• ‡∏™‡πÇ‡∏Ñ‡∏•‡∏™‡πå","‡∏à‡∏≠‡∏´‡πå‡∏ô ‡πÇ‡∏≠‡πÄ‡∏ä","‡πÑ‡∏£‡∏≠‡∏±‡∏ô ‡∏Å‡∏¥‡πä‡∏Å‡∏™‡πå",
                "‡πÄ‡∏ß‡∏¢‡πå‡∏ô ‡∏£‡∏π‡∏ô‡∏µ‡πà‡∏¢‡πå","‡∏£‡∏∏‡∏î ‡∏ü‡∏≤‡∏ô ‡∏ô‡∏¥‡∏™‡πÄ‡∏ó‡∏•‡∏£‡∏≠‡∏¢"],
    "keeper": "‡πÄ‡∏≠‡πá‡∏î‡∏ß‡∏¥‡∏ô ‡∏ü‡∏≤‡∏ô ‡πÄ‡∏î‡∏≠‡∏£‡πå ‡∏ã‡∏≤‡∏£‡πå"
  },
  "Liverpool": {
    "players": ["‡∏™‡∏ï‡∏µ‡∏ü ‡∏ü‡∏¥‡∏ô‡πÅ‡∏ô‡∏ô","‡πÄ‡∏à‡∏°‡∏µ‡πà ‡∏Ñ‡∏≤‡∏£‡πå‡∏£‡∏≤‡πÄ‡∏Å‡∏≠‡∏£‡πå","‡∏ã‡∏≤‡∏°‡∏µ‡πà ‡∏Æ‡∏π‡πÄ‡∏õ‡∏µ‡∏¢","‡∏à‡∏≠‡∏´‡πå‡∏ô ‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏ô‡πà ‡∏£‡∏µ‡πÄ‡∏ã‡πà",
                "‡∏ã‡∏≤‡∏ö‡∏µ ‡∏≠‡∏•‡∏≠‡∏ô‡πÇ‡∏ã‡πà","‡πÇ‡∏°‡∏Æ‡∏≤‡πÄ‡∏´‡∏°‡πá‡∏î ‡∏ã‡∏¥‡∏™‡πÇ‡∏ã‡πÇ‡∏Å‡πâ","‡∏™‡∏ï‡∏µ‡πÄ‡∏ß‡πà‡∏ô ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏£‡∏≤‡∏£‡πå‡∏î","‡∏´‡∏•‡∏∏‡∏¢‡∏™‡πå ‡∏Å‡∏≤‡∏£‡πå‡πÄ‡∏ã‡∏µ‡∏¢",
                "‡∏õ‡∏µ‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÄ‡∏Ñ‡∏£‡πâ‡∏≤‡∏ä‡πå","‡∏å‡∏¥‡∏ö‡∏£‡∏¥‡∏• ‡∏ã‡∏¥‡∏™‡πÄ‡∏ã‡πà"],
    "keeper": "‡πÄ‡∏õ‡πÄ‡∏õ‡πâ ‡πÄ‡∏£‡∏ô‡πà‡∏≤"
  },
  "Arsenal": {
    "players": ["‡πÄ‡∏≠‡πá‡∏°‡∏°‡∏≤‡∏ô‡∏π‡πÄ‡∏≠‡∏• ‡πÄ‡∏≠‡∏ö‡∏π‡πÄ‡∏≠‡πâ","‡πÇ‡∏Ñ‡πÇ‡∏• ‡∏ï‡∏π‡πÄ‡∏£‡πà","‡πÇ‡∏ã‡∏• ‡πÅ‡∏Ñ‡∏°‡πÄ‡∏ö‡∏•","‡πÅ‡∏≠‡∏ä‡∏•‡∏µ‡∏¢‡πå ‡πÇ‡∏Ñ‡∏•",
                "‡∏≠‡πÄ‡∏•‡πá‡∏Å‡∏ã‡∏≤‡∏ô‡πÄ‡∏î‡∏≠‡∏£‡πå ‡πÄ‡∏Ñ‡∏•‡πá‡∏ö","‡∏å‡∏¥‡∏•‡πÅ‡∏ö‡∏£‡πå‡πÇ‡∏ï‡πâ ‡∏ã‡∏¥‡∏•‡∏ß‡∏≤","‡πÄ‡∏ä‡∏™ ‡∏ü‡∏≤‡πÄ‡∏ö‡∏£‡∏Å‡∏±‡∏™","‡πÇ‡∏£‡πÅ‡∏ö‡∏£‡πå ‡∏õ‡∏¥‡πÅ‡∏£‡∏™",
                "‡πÄ‡∏ü‡∏£‡∏î‡∏£‡∏¥‡∏Å ‡∏•‡∏∏‡∏á‡πÄ‡∏ö‡∏¥‡∏£‡πå‡∏Å","‡πÄ‡∏ò‡∏µ‡∏¢‡∏£‡πå‡∏£‡∏µ‡πà ‡∏≠‡∏≠‡∏á‡∏£‡∏µ"],
    "keeper": "‡πÄ‡∏¢‡∏ô‡∏™‡πå ‡πÄ‡∏•‡∏´‡πå‡∏°‡∏±‡∏ô‡∏ô‡πå"
  },
  "Chelsea": {
    "players": ["‡πÄ‡∏õ‡∏≤‡πÇ‡∏• ‡πÄ‡∏ü‡∏£‡πå‡πÄ‡∏£‡∏£‡πà‡∏≤","‡∏£‡∏¥‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏î‡πâ ‡∏Ñ‡∏≤‡∏£‡πå‡∏ß‡∏±‡∏•‡πÇ‡∏ç‡πà","‡∏à‡∏≠‡∏´‡πå‡∏ô ‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏£‡∏µ‡πà","‡∏ß‡∏¥‡∏•‡πÄ‡∏•‡∏µ‡∏¢‡∏° ‡∏Å‡∏±‡∏•‡∏•‡∏≤‡∏™",
                "‡πÇ‡∏Ñ‡∏•‡πâ‡∏î ‡∏°‡∏≤‡πÄ‡∏Å‡πÄ‡∏•‡πÄ‡∏•‡πà","‡∏°‡∏¥‡∏Ñ‡∏≤‡πÄ‡∏≠‡∏• ‡πÄ‡∏≠‡∏™‡πÄ‡∏ã‡∏µ‡∏¢‡∏á","‡πÅ‡∏ü‡∏£‡∏á‡∏Å‡πå ‡πÅ‡∏•‡∏°‡∏û‡∏≤‡∏£‡πå‡∏î","‡πÇ‡∏à ‡πÇ‡∏Ñ‡∏•",
                "‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏¢‡∏ô ‡∏£‡πá‡∏≠‡∏ö‡πÄ‡∏ö‡∏ô","‡πÄ‡∏Æ‡∏≠‡∏£‡πå‡∏ô‡∏±‡∏ô ‡πÄ‡∏Ñ‡∏£‡∏™‡πÇ‡∏õ"],
    "keeper": "‡∏õ‡∏µ‡πÄ‡∏ï‡∏≠‡∏£‡πå ‡πÄ‡∏ä‡πá‡∏Å"
  }
};

/* ===============================
   ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡∏°
   =============================== */
let userTeam, cpuTeam;
let score = 0, oppScore = 0;
let turn = 0;
let isSudden = false;
let shotIndexUser = 0, shotIndexCPU = 0;

let userShotsOrder = [];
let cpuShotsOrder = [];

let shooterTeam = "";
let shooterName = "";

/* ===============================
   ‡πÄ‡∏™‡∏µ‡∏¢‡∏á
   =============================== */
const bgm = document.getElementById("bgm");
const goalSnd = document.getElementById("goal");
const missSnd = document.getElementById("miss");
const endSnd = document.getElementById("end");

function playSound(el){
  el.currentTime = 0;
  el.play().catch(()=>{});
}

function stopBGM(){
  bgm.pause();
  bgm.currentTime = 0;
}

/* ===============================
   Utility
   =============================== */
function shuffle(a){
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function createShotsOrder(team){
  let players = squads[team].players.slice();
  shuffle(players);
  players.push(squads[team].keeper); // keeper last
  return players;
}

/* ===============================
   ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡∏°
   =============================== */
function selectTeam(team){
  userTeam = team;
  let remain = Object.keys(squads).filter(t=>t!==team);
  cpuTeam = remain[Math.floor(Math.random()*remain.length)];

  document.getElementById("teamSelect").style.display="none";
  document.getElementById("gameScreen").style.display="block";

  userShotsOrder = createShotsOrder(userTeam);
  cpuShotsOrder = createShotsOrder(cpuTeam);

  score=0; oppScore=0; turn=0;
  shotIndexUser=0; shotIndexCPU=0;
  isSudden=false;

  updateScoreboard();
  startTurn();

  playSound(bgm);
}

/* ===============================
   ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏≤
   =============================== */
function startTurn(){
  if(turn===0){
    shooterTeam = userTeam;
    shooterName = userShotsOrder[shotIndexUser];

    speak(`‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà ${shotIndexUser+1} ${shooterTeam}: ${shooterName} ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏¢‡∏¥‡∏á`);
  } else {
    shooterTeam = cpuTeam;
    shooterName = cpuShotsOrder[shotIndexCPU];

    let keeper = squads[userTeam].keeper;
    speak(`‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà ${shotIndexCPU+1} ${shooterTeam}: ${shooterName} ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏¢‡∏¥‡∏á ${keeper} ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ã‡∏ü`);
  }
}

/* ===============================
   ‡∏¢‡∏¥‡∏á
   =============================== */
async function chooseDirection(dir){
  let keeperDir = ["TL","TR","C","BL","BR"][Math.floor(Math.random()*5)];
  let isGoal = dir !== keeperDir;

  if(turn===0) score += isGoal?1:0;
  else oppScore += isGoal?1:0;

  updateScoreboard();

  const finalMsg = `${shooterName}  ${shooterTeam} ‡∏¢‡∏¥‡∏á${isGoal?"‡πÄ‡∏Ç‡πâ‡∏≤":"‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤"}!  Score ${score} - ${oppScore}`;

  // üéß ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏û‡∏π‡∏î‡∏ú‡∏•
  if(isGoal) await waitForSound(goalSnd);
  else await waitForSound(missSnd);

  // ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏û‡∏π‡∏î‡∏ú‡∏• (iOS ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ï‡∏±‡∏î)
  speak(finalMsg);

  if(turn===0) shotIndexUser++;
  else shotIndexCPU++;

  setTimeout(checkGameEndOrNext, 1000);
}

/* ===============================
   ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏ö‡πÄ‡∏Å‡∏°
   =============================== */
function checkGameEndOrNext(){
  let rU = 5 - shotIndexUser;
  let rC = 5 - shotIndexCPU;
  let end = false;

  if(!isSudden){
    if(score - oppScore > rC) end = true;
    else if(oppScore - score > rU) end = true;
    else if(shotIndexUser>=5 && shotIndexCPU>=5 && score===oppScore){
      isSudden = true;
      speak("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏ã‡∏±‡∏î‡πÄ‡∏î‡∏ô‡πÄ‡∏î‡∏ò!");
    }
  } else {
    if(turn===1 && score !== oppScore) end = true;
  }

  if(end){
    stopBGM();
    waitForSound(endSnd).then(()=>{
      let msg = score>oppScore ? `${userTeam} ‡∏ä‡∏ô‡∏∞!` : `${cpuTeam} ‡∏ä‡∏ô‡∏∞!`;
      speak(msg);
      setTimeout(()=> alert(msg), 800);
      setTimeout(resetGame, 1200);
    });
  } else {
    turn = 1 - turn;
    setTimeout(startTurn, 800);
  }
}

/* ===============================
   ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
   =============================== */
function updateScoreboard(){
  document.getElementById("scoreBoard").innerText = 
      `Score ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ${score} - ${oppScore}`;
}

/* ===============================
   ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°
   =============================== */
function resetGame(){
  stopBGM();
  score=0; oppScore=0;
  turn=0; shotIndexUser=0; shotIndexCPU=0;
  isSudden=false;

  userShotsOrder=[]; 
  cpuShotsOrder=[];

  document.getElementById("gameScreen").style.display="none";
  document.getElementById("teamSelect").style.display="block";
}
</script>
</body>
</html>
