		<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เกมฝึกไอคิว: นักประดิษฐ์และผู้ค้นพบ</title>
    <!-- โหลด Tailwind CSS CDN สำหรับการจัดสไตล์พื้นฐาน -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- โหลด Tone.js สำหรับการสร้างเสียงเอฟเฟกต์ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        /* นำเข้าฟอนต์ Inter สำหรับข้อความ */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* สีพื้นหลังอ่อนๆ */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .game-container {
            background-color: #ffffff; /* สีพื้นหลังของกล่องเกม */
            border-radius: 20px; /* ขอบโค้งมน */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* เงาเพื่อความลึก */
            padding: 30px;
            max-width: 600px; /* ความกว้างสูงสุด */
            width: 100%; /* ทำให้ปรับตามขนาดหน้าจอ */
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 25px; /* ระยะห่างระหว่างองค์ประกอบ */
        }
        .question-area {
            background-color: #e0f2fe; /* สีพื้นหลังของส่วนคำถาม */
            border-radius: 15px;
            padding: 25px;
            font-size: 1.5rem;
            font-weight: bold;
            color: #1a202c; /* สีข้อความ */
            min-height: 120px; /* ความสูงขั้นต่ำ */
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05); /* เงาด้านใน */
        }
        .options-grid {
            display: grid;
            grid-template-columns: 1fr; /* หนึ่งคอลัมน์สำหรับหน้าจอมือถือ */
            gap: 15px;
        }
        .option-button {
            background-color: #4299e1; /* สีปุ่มเริ่มต้น */
            color: white;
            padding: 18px 25px;
            border-radius: 12px;
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out; /* แอนิเมชันการเปลี่ยนสถานะ */
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            background-image: linear-gradient(to right, #4299e1, #3182ce); /* ไล่ระดับสี */
        }
        .option-button:hover {
            transform: translateY(-3px); /* ยกขึ้นเล็กน้อยเมื่อวางเมาส์ */
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
            background-image: linear-gradient(to right, #3182ce, #2c5282); /* เปลี่ยนไล่ระดับสีเมื่อโฮเวอร์ */
        }
        .option-button:active {
            transform: translateY(0); /* กลับสู่ตำแหน่งเดิมเมื่อคลิก */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-image: linear-gradient(to right, #2c5282, #3182ce); /* เปลี่ยนไล่ระดับสีเมื่อกด */
        }
        /* แอนิเมชันสำหรับเอฟเฟกต์คลื่นเมื่อกดปุ่ม */
        .option-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2); /* สีของคลื่น */
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s ease-out, height 0.4s ease-out;
            opacity: 0;
        }
        .option-button:active::before {
            width: 200%;
            height: 200%;
            opacity: 1;
        }

        .score-display {
            font-size: 1.75rem;
            font-weight: bold;
            color: #2b6cb0; /* สีข้อความคะแนน */
            margin-top: 15px;
        }
        .restart-button {
            background-color: #38a169; /* สีปุ่มเริ่มใหม่ */
            color: white;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            background-image: linear-gradient(to right, #38a169, #2f855a);
        }
        .restart-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
            background-image: linear-gradient(to right, #2f855a, #276749);
        }
        .restart-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            background-image: linear-gradient(to right, #276749, #2f855a);
        }

        .results-area {
            text-align: left;
            margin-top: 20px;
            background-color: #f0f9ff; /* สีพื้นหลังของส่วนสรุปผล */
            border-radius: 15px;
            padding: 25px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        .results-area h3 {
            font-size: 1.75rem;
            color: #2b6cb0;
            margin-bottom: 20px;
            text-align: center;
        }
        .result-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #bfdbfe; /* เส้นประคั่นแต่ละข้อ */
        }
        .result-item:last-child {
            border-bottom: none; /* ไม่มีเส้นประที่ข้อสุดท้าย */
        }
        .result-item p {
            margin: 5px 0;
            font-size: 1.1rem;
            color: #4a5568;
        }
        .result-item .correct {
            color: #2f855a; /* สีเขียวสำหรับคำตอบที่ถูกต้อง */
            font-weight: bold;
        }
        .result-item .incorrect {
            color: #e53e3e; /* สีแดงสำหรับคำตอบที่ผิด */
            font-weight: bold;
        }

        /* Responsive design สำหรับหน้าจอขนาดใหญ่ขึ้น */
        @media (min-width: 640px) {
            .options-grid {
                grid-template-columns: 1fr 1fr 1fr; /* สามคอลัมน์สำหรับหน้าจอขนาดใหญ่ */
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
		<button class="flex items-center rounded-md border border-slate-300 py-2 px-4 text-center text-sm transition-all shadow-sm hover:shadow-lg text-slate-600 hover:text-white hover:bg-slate-800 hover:border-slate-800 focus:text-white focus:bg-slate-800 focus:border-slate-800 active:border-slate-800 active:text-white active:bg-slate-800 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none" type="button" onclick="location.href='index.html'">
			กลับเมนูหลัก
		   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4 ml-1.5">
			<path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd" />
		  </svg>
		</button>
        <h1 class="text-3xl font-bold text-gray-800">เกมฝึกไอคิว: นักประดิษฐ์และผู้ค้นพบ</h1>

        <div id="gameScreen">
            <div class="question-area" id="questionText">
                <!-- คำถามจะถูกโหลดที่นี่ -->
            </div>

            <div class="options-grid" id="options">
                <button class="option-button" data-option-index="0"></button>
                <button class="option-button" data-option-index="1"></button>
                <button class="option-button" data-option-index="2"></button>
            </div>

            <div class="score-display" id="currentScore">
                คะแนน: 0/10
            </div>
        </div>

        <div id="resultsScreen" class="hidden results-area">
            <h3 class="text-2xl font-bold">สรุปผลคะแนน</h3>
            <div id="finalScore" class="text-xl font-bold text-blue-700 mb-4 text-center"></div>
            <div id="answersSummary">
                <!-- สรุปคำตอบจะถูกโหลดที่นี่ -->
            </div>
        </div>

        <button class="restart-button" id="restartButton">เริ่มเล่นใหม่</button>
    </div>

    <script>
        // ใช้ตัวแปร global สำหรับ app ID จาก environment หรือใช้ค่าเริ่มต้น
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // การตั้งค่า Tone.js สำหรับเสียงเอฟเฟกต์
        let clickSynth;

        // ตัวแปรสถานะเกม
        let questions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let answeredQuestionsLog = []; // สำหรับเก็บคำตอบของผู้เล่นและคำตอบที่ถูกต้อง
        let selectedQuestions = []; // สำหรับเก็บ 10 คำถามในรอบปัจจุบัน

        // ข้อมูลคำถามทั้งหมด (50 คำถามสำหรับสาธิต)
        // คุณสามารถเพิ่มคำถามได้มากขึ้นเพื่อให้ถึง 500 คำถามหรือมากกว่านั้น
        const allQuestionsData = [
            { question: "ใครเป็นผู้ประดิษฐ์หลอดไฟ?", answer: "โทมัส เอดิสัน", options: ["อเล็กซานเดอร์ เกรแฮม เบลล์", "นิโคลา เทสลา"] },
            { question: "ใครเป็นผู้ประดิษฐ์โทรศัพท์?", answer: "อเล็กซานเดอร์ เกรแฮม เบลล์", options: ["โทมัส เอดิสัน", "กูลเยลโม มาร์โคนี"] },
            { question: "ใครคือผู้ร่วมประดิษฐ์เครื่องบินลำแรก?", answer: "พี่น้องตระกูลไรต์", options: ["เฮนรี ฟอร์ด", "ลีโอนาร์โด ดา วินชี"] },
            { question: "ใครเป็นผู้ประดิษฐ์แท่นพิมพ์?", answer: "โยฮันเนส กูเทนเบิร์ก", options: ["อัลเบิร์ต ไอน์สไตน์", "กาลิเลโอ กาลิเลอี"] },
            { question: "ใครเป็นผู้ค้นพบกัมมันตภาพรังสีและธาตุเรเดียม?", answer: "มารี กูรี", options: ["ไอแซก นิวตัน", "เจนน์ บราวน์"] },
            { question: "ใครเป็นผู้คิดค้นกฎการเคลื่อนที่และแรงโน้มถ่วง?", answer: "ไอแซก นิวตัน", options: ["อัลเบิร์ต ไอน์สไตน์", "สตีเฟน ฮอว์คิง"] },
            { question: "ใครเป็นผู้พัฒนาทฤษฎีสัมพัทธภาพ?", answer: "อัลเบิร์ต ไอน์สไตน์", options: ["แม็กซ์ แพลงค์", "นีลส์ บอร์"] },
            { question: "ใครเป็นที่รู้จักในฐานะผู้สนับสนุนระบบไฟฟ้ากระแสสลับ (AC)?", answer: "นิโคลา เทสลา", options: ["โทมัส เอดิสัน", "จอร์จ เวสติงเฮาส์"] },
            { question: "ใครเป็นผู้คิดค้นกระบวนการพาสเจอร์ไรซ์ (Pasteurization)?", answer: "หลุยส์ ปาสเตอร์", options: ["รอเบิร์ต คอค", "โจเซฟ ลิสเตอร์"] },
            { question: "ใครเป็นผู้ค้นพบเพนิซิลลิน?", answer: "อเล็กซานเดอร์ เฟลมมิง", options: ["เอ็ดเวิร์ด เจนเนอร์", "โจนาส ซอล์ค"] },
            { question: "ใครคือผู้ที่ใช้กล้องโทรทรรศน์สังเกตดวงจันทร์ของดาวพฤหัสบดี?", answer: "กาลิเลโอ กาลิเลอี", options: ["นิโคไล โคเปอร์นิคัส", "โยฮันเนส เคปเลอร์"] },
            { question: "ใครเป็นผู้คิดค้นทฤษฎีวิวัฒนาการโดยการคัดเลือกตามธรรมชาติ?", answer: "ชาร์ลส์ ดาร์วิน", options: ["เกรเกอร์ เมนเดล", "ฌอง-แบบติสต์ ลามาร์ค"] },
            { question: "ใครคือผู้ปรับปรุงเครื่องจักรไอน้ำอย่างมีนัยสำคัญ?", answer: "เจมส์ วัตต์", options: ["จอร์จ สตีเฟนสัน", "รูดอล์ฟ ดีเซล"] },
            { question: "ใครเป็นผู้ประดิษฐ์รถยนต์คันแรกที่ใช้เชื้อเพลิงเบนซิน?", answer: "คาร์ล เบนซ์", options: ["เฮนรี ฟอร์ด", "เฟอร์ดินานด์ พอร์เช่"] },
            { question: "ใครเป็นผู้คิดค้นเวิลด์ไวด์เว็บ (World Wide Web)?", answer: "ทิม เบอร์เนอร์ส-ลี", options: ["บิล เกตส์", "สตีฟ จอบส์"] },
            { question: "ใครร่วมก่อตั้งบริษัท Apple และเปิดตัว iPhone?", answer: "สตีฟ จอบส์", options: ["บิล เกตส์", "เจฟฟ์ เบซอส"] },
            { question: "ลีโอนาร์โด ดา วินชี มีชื่อเสียงในด้านใด?", answer: "อัจฉริยะรอบด้านและศิลปิน", options: ["นักการเมืองผู้ยิ่งใหญ่", "นักปรัชญาชาวกรีกโบราณ"] },
            { question: "ใครเป็นผู้คิดค้นหลักการแรงลอยตัวและคานงัด?", answer: "อาร์คิมิดีส", options: ["พลาโต", "ยูคลิด"] },
            { question: "ใครเป็นผู้ค้นพบหลักการพื้นฐานของแม่เหล็กไฟฟ้า?", answer: "ไมเคิล ฟาราเดย์", options: ["เจมส์ คลาร์ก แม็กซ์เวลล์", "เฮนริช เฮิรตซ์"] },
            { question: "ใครเป็นที่รู้จักในฐานะ 'บิดาแห่งคอมพิวเตอร์'?", answer: "ชาร์ลส์ แบบเบจ", options: ["อลัน ทัวริง", "จอห์น วอน นอยแมน"] },
            { question: "ใครเป็นผู้ค้นพบโครงสร้าง DNA แบบเกลียวคู่?", answer: "เจมส์ วัตสัน และ ฟรานซิส คริก", options: ["โรซาลินด์ แฟรงคลิน", "เมนเดล"] },
            { question: "ใครเป็นผู้คิดค้นทฤษฎีควอนตัม?", answer: "แม็กซ์ แพลงค์", options: ["นีลส์ บอร์", "เออร์วิน ชโรดิงเงอร์"] },
            { question: "ใครเป็นผู้ประดิษฐ์เครื่องยนต์สันดาปภายใน?", answer: "นิโคเลาส์ ออตโต้", options: ["รูดอล์ฟ ดีเซล", "คาร์ล เบนซ์"] },
            { question: "ใครเป็นผู้คิดค้นวัคซีนไข้ทรพิษ?", answer: "เอ็ดเวิร์ด เจนเนอร์", options: ["หลุยส์ ปาสเตอร์", "โรเบิร์ต คอค"] },
            { question: "ใครเป็นผู้ประดิษฐ์วิทยุ?", answer: "กูลเยลโม มาร์โคนี", options: ["นิโคลา เทสลา", "เฮนริช เฮิรตซ์"] },
            { question: "ใครเป็นผู้คิดค้นแบตเตอรี่ไฟฟ้า?", answer: "อเลสซานโดร โวลตา", options: ["เบนจามิน แฟรงคลิน", "ไมเคิล ฟาราเดย์"] },
            { question: "ใครเป็นผู้คิดค้นระเบิดปรมาณู?", answer: "เจ. รอเบิร์ต ออพเพนไฮเมอร์", options: ["อัลเบิร์ต ไอน์สไตน์", "เอนริโก เฟอร์มิ"] },
            { question: "ใครเป็นผู้ค้นพบรังสีเอกซ์ (X-rays)?", answer: "วิลเฮล์ม คอนราด เรินต์เกน", options: ["มารี กูรี", "แอนทวน อองรี เบ็กเคอเรล"] },
            { question: "ใครเป็นผู้เขียนหนังสือ 'กำเนิดสปีชีส์'?", answer: "ชาร์ลส์ ดาร์วิน", options: ["อัลเบิร์ต ไอน์สไตน์", "ไอแซก นิวตัน"] },
            { question: "ใครคือผู้ที่คิดค้นการผ่าตัดไร้เชื้อ (Antiseptic Surgery)?", answer: "โจเซฟ ลิสเตอร์", options: ["หลุยส์ ปาสเตอร์", "โรเบิร์ต คอค"] },
            { question: "ใครคือผู้ที่ประดิษฐ์และปรับปรุงกล้องโทรทรรศน์ให้ดีขึ้น?", answer: "กาลิเลโอ กาลิเลอี", options: ["นิโคไล โคเปอร์นิคัส", "โยฮันเนส เคปเลอร์"] },
            { question: "ใครคือผู้ก่อตั้งบริษัท Microsoft?", answer: "บิล เกตส์", options: ["สตีฟ จอบส์", "มาร์ค ซักเคอร์เบิร์ก"] },
            { question: "ใครเป็นผู้คิดค้นโทรทัศน์อิเล็กทรอนิกส์?", answer: "ฟิโล ฟาร์นสเวิร์ธ", options: ["จอห์น โลกี้ แบร์ด", "นิโคลา เทสลา"] },
            { question: "ใครคือผู้ประดิษฐ์เครื่องปรับอากาศ?", answer: "วิลลิส แคเรียร์", options: ["ไมเคิล ฟาราเดย์", "เจมส์ วัตต์"] },
            { question: "ใครเป็นผู้คิดค้นพลาสติกชนิดแรก (Bakelite)?", answer: "ลีโอ เบคแลนด์", options: ["ชาร์ลส์ กู๊ดเยียร์", "จอห์น เวสลีย์ ไฮแอท"] },
            { question: "ใครเป็นผู้ประดิษฐ์เครื่องถ่ายเอกสาร (Photocopier)?", answer: "เชสเตอร์ คาร์ลสัน", options: ["เอดวิน แลนด์", "สตีฟ จอบส์"] },
            { question: "ใครคือผู้ค้นพบแรงโน้มถ่วง?", answer: "ไอแซก นิวตัน", options: ["กาลิเลโอ กาลิเลอี", "อัลเบิร์ต ไอน์สไตน์"] },
            { question: "ใครเป็นผู้คิดค้นการทำระเบิดไดนาไมต์?", answer: "อัลเฟรด โนเบล", options: ["เจ. รอเบิร์ต ออพเพนไฮเมอร์", "เฮนรี ฟอร์ด"] },
            { question: "ใครคือผู้ริเริ่มแนวคิดเรื่องสายการผลิตสำหรับการผลิตรถยนต์?", answer: "เฮนรี ฟอร์ด", options: ["คาร์ล เบนซ์", "รูดอล์ฟ ดีเซล"] },
            { question: "ใครเป็นผู้คิดค้นระบบเบรกลมสำหรับรถไฟ?", answer: "จอร์จ เวสติงเฮาส์", options: ["อีไล วิทนีย์", "โรเบิร์ต ฟูลตัน"] },
            { question: "ใครเป็นผู้พัฒนาทฤษฎีบิ๊กแบง?", answer: "จอร์จ เลอแมทร์", options: ["สตีเฟน ฮอว์คิง", "เอ็ดวิน ฮับเบิล"] },
            { question: "ใครเป็นผู้ค้นพบวงจรการทำงานของเลือดในร่างกายมนุษย์?", answer: "วิลเลียม ฮาร์วีย์", options: ["หลุยส์ ปาสเตอร์", "โจเซฟ ลิสเตอร์"] },
            { question: "ใครเป็นผู้ประดิษฐ์การส่งข้อความรหัสมอร์ส?", answer: "แซมูเอล มอร์ส", options: ["อเล็กซานเดอร์ เกรแฮม เบลล์", "กูลเยลโม มาร์โคนี"] },
            { question: "ใครคือผู้ริเริ่มการสร้างสรรค์ภาพยนตร์แอนิเมชัน?", answer: "วอลต์ ดิสนีย์", options: ["ชาร์ลี แชปลิน", "สตีเวน สปีลเบิร์ก"] },
            { question: "ใครเป็นผู้ประดิษฐ์เครื่องเก็บเกี่ยวฝ้าย (Cotton Gin)?", answer: "อีไล วิทนีย์", options: ["จอห์น เคย์", "เจมส์ ฮาร์กรีฟส์"] },
            { question: "ใครคือผู้ที่คิดค้นระบบ Braille สำหรับผู้พิการทางสายตา?", answer: "หลุยส์ เบรลล์", options: ["เฮเลน เคลเลอร์", "แอนน์ ซัลลิแวน"] },
            { question: "ใครเป็นผู้ประดิษฐ์กล้องถ่ายภาพดิจิทัลเครื่องแรก?", answer: "สตีเวน แซสซัน", options: ["จอร์จ อีสต์แมน", "เอ็ดวิน แลนด์"] },
            { question: "ใครคือผู้ค้นพบทวีปอเมริกา?", answer: "คริสโตเฟอร์ โคลัมบัส", options: ["เฟอร์ดินานด์ มาเจลลัน", "มาร์โค โปโล"] },
            { question: "ใครคือผู้ที่คิดค้นทฤษฎี Heliocentrism (โลกโคจรรอบดวงอาทิตย์)?", answer: "นิโคไล โคเปอร์นิคัส", options: ["กาลิเลโอ กาลิเลอี", "คลอเดียส ปโตเลมี"] },
            { question: "ใครเป็นผู้ประดิษฐ์ตู้เย็นสมัยใหม่?", answer: "โอลิเวอร์ เอแวนส์", options: ["คาร์ล วอน ลินเด", "เจคอบ เพอร์กินส์"] }
            // สามารถเพิ่มคำถามได้ที่นี่เพื่อให้ครบ 500 คำถาม
            // ตัวอย่าง: { question: "คำถามใหม่?", answer: "คำตอบที่ถูกต้อง", options: ["ตัวเลือกผิด 1", "ตัวเลือกผิด 2"] },
        ];

        // ฟังก์ชันสลับตำแหน่งในอาร์เรย์ (Fisher-Yates shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // เริ่มต้น Tone.js สำหรับเสียง
        async function initializeAudio() {
            // สร้างเสียง 'blip' แบบง่ายๆ
            clickSynth = new Tone.MembraneSynth({
                pitchDecay: 0.05,
                octaves: 8,
                oscillator: { type: 'sine' },
                envelope: {
                    attack: 0.001,
                    decay: 0.4,
                    sustain: 0.01,
                    release: 1.4,
                    attackCurve: 'exponential'
                },
                volume: -10 // ปรับระดับเสียง
            }).toDestination();

            // ฟังก์ชันสำหรับเล่นเสียง
            window.playClickSound = () => {
                clickSynth.triggerAttackRelease('C4', '8n');
            };
        }

        // ฟังก์ชันเริ่มต้นเกม
        function initGame() {
            // ตรวจสอบให้แน่ใจว่า AudioContext เริ่มทำงานเมื่อมีการโต้ตอบของผู้ใช้
            if (Tone.context.state !== 'running') {
                Tone.start();
            }

            questions = shuffleArray([...allQuestionsData]); // สุ่มคำถามทั้งหมด
            selectedQuestions = questions.slice(0, 10); // เลือก 10 คำถามแรกสำหรับรอบนี้
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestionsLog = []; // ล้างบันทึกคำตอบ

            document.getElementById('gameScreen').classList.remove('hidden'); // แสดงหน้าจอเกม
            document.getElementById('resultsScreen').classList.add('hidden'); // ซ่อนหน้าจอสรุปผล
            document.getElementById('restartButton').textContent = 'เริ่มเล่นใหม่'; // รีเซ็ตข้อความปุ่ม

            displayQuestion(); // แสดงคำถามแรก
            updateScoreDisplay(); // อัปเดตคะแนน
        }

        // ฟังก์ชันแสดงคำถาม
        function displayQuestion() {
            if (currentQuestionIndex < selectedQuestions.length) {
                const q = selectedQuestions[currentQuestionIndex];
                document.getElementById('questionText').textContent = q.question;

                const options = shuffleArray([q.answer, ...q.options]); // รวมคำตอบที่ถูกต้องและคำตอบหลอกแล้วสลับ
                const optionButtons = document.querySelectorAll('.option-button');

                optionButtons.forEach((button, index) => {
                    button.textContent = options[index];
                    // กำหนด onclick event เพื่อตรวจสอบคำตอบเมื่อผู้เล่นเลือก
                    button.onclick = () => checkAnswer(options[index], q.answer, q.question);
                });
            } else {
                showResults(); // หากตอบครบ 10 ข้อแล้ว ให้แสดงผลลัพธ์
            }
        }

        // ฟังก์ชันตรวจสอบคำตอบ
        function checkAnswer(selectedOption, correctAnswer, questionText) {
            playClickSound(); // เล่นเสียงเอฟเฟกต์เมื่อเลือกคำตอบ

            const isCorrect = selectedOption === correctAnswer;
            if (isCorrect) {
                score++; // เพิ่มคะแนนหากคำตอบถูกต้อง
            }

            // บันทึกคำตอบของผู้เล่นและคำตอบที่ถูกต้อง
            answeredQuestionsLog.push({
                question: questionText,
                userAnswer: selectedOption,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            });

            updateScoreDisplay(); // อัปเดตคะแนนที่แสดง
            currentQuestionIndex++; // ไปยังคำถามถัดไป
            displayQuestion(); // แสดงคำถามถัดไปหรือแสดงผลลัพธ์
        }

        // ฟังก์ชันอัปเดตการแสดงคะแนน
        function updateScoreDisplay() {
            document.getElementById('currentScore').textContent = `คะแนน: ${score}/${selectedQuestions.length}`;
        }

        // ฟังก์ชันแสดงผลลัพธ์เมื่อจบเกม
        function showResults() {
            document.getElementById('gameScreen').classList.add('hidden'); // ซ่อนหน้าจอเกม
            document.getElementById('resultsScreen').classList.remove('hidden'); // แสดงหน้าจอสรุปผล
            document.getElementById('restartButton').textContent = 'เล่นอีกครั้ง'; // เปลี่ยนข้อความปุ่ม

            document.getElementById('finalScore').textContent = `คุณได้ ${score} คะแนน จากทั้งหมด ${selectedQuestions.length} ข้อ`;

            const answersSummaryDiv = document.getElementById('answersSummary');
            answersSummaryDiv.innerHTML = ''; // ล้างสรุปผลเก่า

            answeredQuestionsLog.forEach((log, index) => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('result-item');
                // แสดงคำถาม คำตอบของผู้เล่น และคำตอบที่ถูกต้อง พร้อมสีบ่งบอกว่าถูกหรือผิด
                itemDiv.innerHTML = `
                    <p><strong>ข้อที่ ${index + 1}:</strong> ${log.question}</p>
                    <p>คำตอบของคุณ: <span class="${log.isCorrect ? 'correct' : 'incorrect'}">${log.userAnswer}</span></p>
                    <p>คำตอบที่ถูกต้อง: <span class="correct">${log.correctAnswer}</span></p>
                `;
                answersSummaryDiv.appendChild(itemDiv);
            });
        }

        // Event listener สำหรับปุ่มเริ่มใหม่
        document.getElementById('restartButton').addEventListener('click', initGame);

        // เริ่มต้นเสียงเมื่อหน้าต่างโหลดเสร็จ
        window.onload = initializeAudio;

        // เริ่มต้นเกมเมื่อ DOM โหลดเสร็จสมบูรณ์
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
